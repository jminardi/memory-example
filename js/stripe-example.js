var initStripe=function(){"use strict";var s=Stripe("pk_test_51H2NVjDbnlrOGXHibgFUU9qHGcZuds4QQvrAFCYCX9wAW2FwA3TLD7z0eUbfhEqpqbjcrCeOVoHjSkRsy1jsvuYz00LI5DuEOq");var u,d,e,p,v,t,y,m,i,r=s.elements().create("card",{iconStyle:"solid",style:{base:{iconColor:"#fff",color:"#fff",fontWeight:400,fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",fontSize:"16px",fontSmoothing:"antialiased","::placeholder":{color:"#BFAEF6"},":-webkit-autofill":{color:"#fce883"}},invalid:{iconColor:"#FFC7EE",color:"#FFC7EE"}}});function f(){Array.prototype.forEach.call(v.querySelectorAll("input[type='text'], input[type='email'], input[type='tel']"),function(e){e.removeAttribute("disabled")})}r.mount("#example5-card"),u=[r],e="."+(d="example5"),p=document.querySelector(e),v=p.querySelector("form"),t=p.querySelector("a.reset"),y=v.querySelector(".error"),m=y.querySelector(".message"),i={},u.forEach(function(e,r){e.on("change",function(e){var t;e.error?(y.classList.add("visible"),i[r]=e.error.message,m.innerText=e.error.message):(i[r]=null,(t=Object.keys(i).sort().reduce(function(e,t){return e||i[t]},null))?m.innerText=t:y.classList.remove("visible"))})}),v.addEventListener("submit",function(e){e.preventDefault();var t,r=!0;if(Array.prototype.forEach.call(v.querySelectorAll("input"),function(e){!e.checkValidity||e.checkValidity()||(r=!1)}),!r)return(t=document.createElement("input")).type="submit",t.style.display="none",v.appendChild(t),t.click(),void t.remove();p.classList.add("submitting"),Array.prototype.forEach.call(v.querySelectorAll("input[type='text'], input[type='email'], input[type='tel']"),function(e){e.setAttribute("disabled","true")});var i=v.querySelector("#"+d+"-name"),o=v.querySelector("#"+d+"-email"),l=v.querySelector("#"+d+"-address"),a=v.querySelector("#"+d+"-city"),n=v.querySelector("#"+d+"-state"),c=v.querySelector("#"+d+"-zip");s.confirmCardPayment(window.vm.client_secret,{payment_method:{card:u[0]},receipt_email:o?o.value:void 0,shipping:{address:{line1:l?l.value:void 0,city:a?a.value:void 0,state:n?n.value:void 0,postal_code:c?c.value:void 0},name:i?i.value:void 0}}).then(function(e){p.classList.remove("submitting"),e.error?(console.log(e),f(),y.classList.add("visible"),m.innerText="Charging error, check card details."):(console.log("stripe resp: ",e),window.vm.postOrderToBackend(e),window.vm.userEmail=o.value,p.classList.add("submitted"))})}),t.addEventListener("click",function(e){e.preventDefault(),v.reset(),u.forEach(function(e){e.clear()}),y.classList.remove("visible"),f(),p.classList.remove("submitted")})};